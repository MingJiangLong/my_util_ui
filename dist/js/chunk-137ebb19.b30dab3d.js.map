{"version":3,"sources":["webpack:///./src/views/BeJsonPage.vue?e599","webpack:///./src/views/BeJsonPage.vue?02e8","webpack:///./src/views/BeJsonPage.vue?eff6","webpack:///./src/views/BeJsonPage.vue?dad7","webpack:///./src/views/BeJsonPage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","parsingValue","staticStyle","_v","_s","parsedError","_e","staticRenderFns","UI_COLOR","jsonKey","doubleQuotation","changeValue","paredValue","JSON","parse","resultDom","Object","prototype","toString","call","genParsedDom","document","createElement","innerText","findDom","getElementById","childNodes","childNodesLength","length","i","removeChild","appendChild","error","key","haveMore","prefixDom","suffixDom","valueType","getValueType","prefixPart1","prefixPart2","prefixPart3","prefixPart4","style","cssText","suffixDomPart1","paddingRight","paddingLeft","color","type","slice","values","parentDom","dataKey","keyIndex","keyCount","tag","parentContainer","margin","childContainer","fontSize","fontWeight","valuesType","needDeep","shell","genShell","keys","forEach","index","currentValue","dom","valueDom","immediate","deep","component"],"mappings":"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","file":"js/chunk-137ebb19.b30dab3d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BeJsonPage.vue?vue&type=style&index=0&id=02174f4b&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"BeJson-container\"},[_c('div',{staticClass:\"BeJson-container-first-item\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.parsingValue),expression:\"parsingValue\"}],attrs:{\"placeholder\":\"输入待格式化json字符串\"},domProps:{\"value\":(_vm.parsingValue)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.parsingValue=$event.target.value}}})]),_c('div',{staticClass:\"BeJson-container-second-item\"},[_c('div',{staticStyle:{\"overflow-y\":\"scroll\"},attrs:{\"id\":\"parsed-dom-container\"}}),(_vm.parsedError)?_c('div',{staticClass:\"BeJson-container-error\"},[_vm._v(\" \"+_vm._s(_vm.parsedError)+\" \")]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Prop, Vue, Watch } from \"vue-property-decorator\";\r\n@Component\r\nexport default class BeJson extends Vue {\r\n  UI_COLOR = {\r\n    jsonKey: \"#94bfda\",\r\n    doubleQuotation: \"white\",\r\n  };\r\n\r\n  /**\r\n   * 待解析的值\r\n   */\r\n  parsingValue = \"\";\r\n\r\n  /**\r\n   * 解析错误提示\r\n   */\r\n  parsedError = \"\";\r\n\r\n  @Watch(\"parsingValue\", {\r\n    immediate: true,\r\n    deep: true,\r\n  })\r\n  onParsingValueChange(changeValue: string) {\r\n    try {\r\n      if (changeValue === \"\") return;\r\n      this.parsedError = \"\";\r\n\r\n      /**\r\n       * JSON 检查格式是否正确\r\n       */\r\n      let paredValue = JSON.parse(changeValue);\r\n\r\n      /**\r\n       * 生成的节点\r\n       */\r\n      let resultDom = null;\r\n      if (\r\n        Object.prototype.toString.call(paredValue) === \"[object Object]\" ||\r\n        Object.prototype.toString.call(paredValue) === \"[object Array]\"\r\n      ) {\r\n        resultDom = this.genParsedDom(paredValue);\r\n      } else {\r\n        // 简单类型直接展示\r\n        resultDom = document.createElement(\"div\");\r\n        resultDom.innerText = `${paredValue}`;\r\n      }\r\n\r\n      // TODO: 已有节点移除需要防止数组坍塌\r\n      let findDom = document.getElementById(\"parsed-dom-container\");\r\n\r\n      if (findDom) {\r\n        let childNodes = findDom.childNodes;\r\n        let childNodesLength = childNodes.length;\r\n\r\n        // 移除已有节点\r\n        if (childNodesLength) {\r\n          for (let i = childNodesLength - 1; i >= 0; i--) {\r\n            findDom.removeChild(childNodes[i]);\r\n          }\r\n        }\r\n        // 将生成的节点插入\r\n        findDom.appendChild(resultDom);\r\n      }\r\n    } catch (error) {\r\n      this.parsedError = `${error}`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 生成外壳\r\n   * @param key 节点名字\r\n   * @param valueType 所属数据类型\r\n   * @param haveMore 是否有更多的key\r\n   */\r\n  genShell(key: string, value: any, haveMore = false) {\r\n    let prefixDom = null;\r\n    let suffixDom = null;\r\n    let valueType = this.getValueType(value);\r\n    if (valueType === \"Object\" || valueType === \"Array\") {\r\n      prefixDom = document.createElement(\"div\");\r\n      suffixDom = document.createElement(\"div\");\r\n    } else {\r\n      suffixDom = document.createElement(\"span\");\r\n      prefixDom = document.createElement(\"span\");\r\n    }\r\n\r\n    let prefixPart1 = document.createElement(\"span\"); // key\r\n    let prefixPart2 = document.createElement(\"span\"); // ：\r\n    let prefixPart3 = document.createElement(\"span\"); // {/[\r\n    let prefixPart4 = document.createElement(\"img\");\r\n    prefixPart4.style.cssText =\r\n      \"display:inline-block;height:20px;width:20px;margin:0 10px\";\r\n    let suffixDomPart1 = document.createElement(\"span\");\r\n\r\n    if (key) {\r\n      prefixPart2.innerText = \":\";\r\n      prefixPart1.innerText = key;\r\n      prefixPart2.style.paddingRight = \"7px\";\r\n      prefixPart2.style.paddingLeft = \"3px\";\r\n    }\r\n    if (valueType === \"Object\" || valueType === \"Array\") {\r\n      // if (value.$$status === undefined) {\r\n      //   value.$$status = true;\r\n      // }\r\n\r\n      // if (value.$$status) {\r\n      //   prefixPart4.src = require(\"../assets/image/reduce.png\");\r\n      // } else {\r\n      //   prefixPart4.src = require(\"../assets/image/add.png\");\r\n      // }\r\n      prefixPart3.innerText = valueType === \"Object\" ? \"{\" : \"[\";\r\n      suffixDom.innerText = valueType === \"Object\" ? \"}\" : \"]\";\r\n    }\r\n\r\n    suffixDomPart1.innerText = haveMore ? \",\" : \"\";\r\n    suffixDomPart1.style.paddingLeft = \"3px\";\r\n    suffixDom.style.color = prefixDom.style.color = \"#c1c1c1\";\r\n    prefixPart2.style.color = suffixDomPart1.style.color = \"white\";\r\n\r\n    prefixDom.appendChild(prefixPart1);\r\n    prefixDom.appendChild(prefixPart2);\r\n    prefixDom.appendChild(prefixPart3);\r\n    if (valueType === \"Object\" || valueType === \"Array\") {\r\n      // prefixPart4.addEventListener(\"click\", () => {\r\n      //   value.$$status = !value.$$status;\r\n      // });\r\n      // 添加打开或者关闭标签\r\n      // prefixDom.appendChild(prefixPart4);\r\n    }\r\n\r\n    suffixDom.appendChild(suffixDomPart1);\r\n\r\n    return {\r\n      prefixDom,\r\n      suffixDom,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 判断是否需要继续遍历\r\n   */\r\n  needDeep(value: any) {\r\n    let type = this.getValueType(value);\r\n    return type === \"Array\" || type === \"Object\";\r\n  }\r\n\r\n  /**\r\n   * 获取值类型\r\n   */\r\n  getValueType(value: any) {\r\n    return Object.prototype.toString.call(value).slice(8, -1);\r\n  }\r\n  /**\r\n   * 生成解析节点\r\n   * 默认是一个json字符串\r\n   * 会通过JSON.parse校验\r\n   */\r\n  genParsedDom(\r\n    values: any,\r\n    parentDom?: HTMLElement,\r\n    dataKey?: string,\r\n    keyIndex = 0,\r\n    keyCount = 0,\r\n    tag = 1\r\n  ) {\r\n    let parentContainer = parentDom || document.createElement(\"div\");\r\n    // 如果是最外层 增加间距\r\n    if (tag === 1) {\r\n      parentContainer.style.margin = \"20px 20px 0 20px\";\r\n    }\r\n\r\n    // 生成子元素节点\r\n    let childContainer = document.createElement(\"div\");\r\n    childContainer.style.paddingLeft = `${20}px`;\r\n    childContainer.style.fontSize = \"22px\";\r\n    childContainer.style.fontWeight = \"800\";\r\n\r\n    let valuesType = this.getValueType(values);\r\n\r\n    // 基础类型直接返回\r\n    if (!this.needDeep(values)) {\r\n      childContainer.innerText = `${values}`;\r\n      childContainer.style.color = \"white\";\r\n      return childContainer;\r\n    }\r\n\r\n    // 生成包裹shell [] / {} valuesType这里只会是复杂类型\r\n    let shell = this.genShell(dataKey || \"\", values, keyIndex !== keyCount);\r\n\r\n    // 复杂类型递归直至简单类型\r\n    if (valuesType === \"Object\") {\r\n      let keys = Object.keys(values);\r\n      keys.forEach((key, index) => {\r\n        let currentValue = values[key];\r\n        if (this.needDeep(currentValue)) {\r\n          this.genParsedDom(\r\n            currentValue,\r\n            childContainer,\r\n            key,\r\n            index,\r\n            keys.length - 1,\r\n            tag++\r\n          );\r\n        } else {\r\n          this.appendChild(\r\n            childContainer,\r\n            key,\r\n            currentValue,\r\n            index,\r\n            keys.length - 1\r\n          );\r\n        }\r\n      });\r\n    } else {\r\n      values.forEach((value: any, index: number) => {\r\n        if (this.needDeep(value)) {\r\n          this.genParsedDom(\r\n            value,\r\n            childContainer,\r\n            \"\",\r\n            index,\r\n            values.length - 1,\r\n            tag++\r\n          );\r\n        } else {\r\n          this.appendChild(childContainer, \"\", value, index, values.length - 1);\r\n        }\r\n      });\r\n    }\r\n    // 将生成节点添加至新child body\r\n    parentContainer.appendChild(shell.prefixDom);\r\n    parentContainer.appendChild(childContainer);\r\n    parentContainer.appendChild(shell.suffixDom);\r\n\r\n    return parentContainer;\r\n  }\r\n  /**\r\n   * 添加子节点\r\n   */\r\n  appendChild(\r\n    parentDom: HTMLElement,\r\n    key?: string,\r\n    value?: any,\r\n    keyIndex = 0,\r\n    keyCount = 0\r\n  ) {\r\n    let dom = document.createElement(\"div\");\r\n    dom.style.color = \"#94bfda\";\r\n    dom.style.fontSize = \"20px\";\r\n\r\n    let valueDom = document.createElement(\"span\");\r\n    valueDom.innerText = `${value}`;\r\n    valueDom.style.color = \"#c6b625\";\r\n\r\n    let valueType = this.getValueType(value);\r\n    switch (valueType) {\r\n      case \"String\":\r\n        valueDom.innerText = `\"${value}\"`;\r\n        break;\r\n      case \"Number\":\r\n        valueDom.style.color = \"#bec5a8\";\r\n        break;\r\n      case \"Array\":\r\n        break;\r\n      case \"Boolean\":\r\n        valueDom.style.color = \"#4c85b5\";\r\n        break;\r\n      case \"Undefined\":\r\n        valueDom.style.color = \"#5191c6\";\r\n\r\n        break;\r\n      case \"Null\":\r\n        valueDom.style.color = \"#5191c6\";\r\n        break;\r\n      default:\r\n        valueDom.style.color = \"#CE9178\";\r\n    }\r\n    const shell = this.genShell(key || \"\", value, keyIndex !== keyCount);\r\n    dom.appendChild(shell.prefixDom);\r\n    dom.appendChild(valueDom);\r\n    dom.appendChild(shell.suffixDom);\r\n    parentDom.appendChild(dom);\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BeJsonPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BeJsonPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BeJsonPage.vue?vue&type=template&id=02174f4b&scoped=true&\"\nimport script from \"./BeJsonPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./BeJsonPage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./BeJsonPage.vue?vue&type=style&index=0&id=02174f4b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02174f4b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}